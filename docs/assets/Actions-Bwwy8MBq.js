import{r as g,u as N,e as h,w as F,c as d,o as u,b as e,a as T,F as S,f as P,t as f,g as _,v as V,h as M,i as z,j as H,k as U,n as R,l as O,m as I,p as B,q as E,s as D,x as q,y as G,z as J}from"./index-D6kPsB27.js";const Y=[{id:1,author_id:10,title:"剩食問題",group:"一年忠班",startTime:"1746028800",endTime:"1753977600",types:[2],intro:"",progress:10,thumbnail:"thumb2.jpg",description:"",stage:{0:{title:"行動規劃",startTime:"1746028800",endTime:"1748877600"},1:{title:"行動調查",startTime:"1748877600",endTime:"1749877600"},2:{title:"行動實施",startTime:"1749877600",endTime:"1753977600"},3:{title:"成果分享",startTime:"1752877600",endTime:"1753977600"}},post:[{id:111,user_id:10,title:"剩食狀況記錄",time:"1747028800",content:"每日午餐檢查剩食現況",likes:0,comment:[]}]},{id:2,title:"剩食問題",group:"一年孝班",startTime:"1746028800",endTime:"1753977600",types:[2],intro:"",progress:40,thumbnail:"thumb2.jpg",description:"",stage:{0:{title:"行動規劃",startTime:"1746028800",endTime:"1748877600"},1:{title:"行動調查",startTime:"1748877600",endTime:"1749877600"},2:{title:"行動實施",startTime:"1749877600",endTime:"1753977600"},3:{title:"成果分享",startTime:"1752877600",endTime:"1753977600"}}},{id:3,title:"節約用水",group:"全校",startTime:"",endTime:"",types:[6],intro:"",progress:80,thumbnail:"thumb2.jpg",description:"",stage:{0:{title:"行動規劃",startTime:"1746028800",endTime:"1748877600"},1:{title:"行動調查",startTime:"1748877600",endTime:"1749877600"},2:{title:"行動實施",startTime:"1749877600",endTime:"1753977600"},3:{title:"成果分享",startTime:"1752877600",endTime:"1753977600"}}},{id:4,title:"社區踏查",group:"",startTime:"",endTime:"",types:[2,3],intro:"",progress:50,thumbnail:"thumb2.jpg",description:"",stage:{0:{title:"行動規劃",startTime:"1746028800",endTime:"1748877600"},1:{title:"行動調查",startTime:"1748877600",endTime:"1749877600"},2:{title:"行動實施",startTime:"1749877600",endTime:"1753977600"},3:{title:"成果分享",startTime:"1752877600",endTime:"1753977600"}}}],L=[{title:"全部",value:0},{title:"消除貧窮",value:1},{title:"終結飢餓",value:2},{title:"健康與福祉",value:3},{title:"優質教育",value:4},{title:"性別平等",value:5},{title:"淨水與衛生",value:6},{title:"可負擔的<br/>永續能源",value:7},{title:"就業與<br/>經濟成長",value:8},{title:"永續工業<br/>與基礎建設",value:9},{title:"消弭<br/>不平等",value:10},{title:"永續城鄉",value:11},{title:"責任消費<br/>與生產",value:12},{title:"氣候行動",value:13},{title:"永續海洋<br/>與保育",value:14},{title:"陸域生態",value:15},{title:"制度的正義<br/>與和平",value:16},{title:"永續發展<br/>夥伴關係",value:17}],K={class:"text-lg flex items-center w-full"},Q={class:"flex items-center gap-4"},W=["innerHTML"],X={key:0,class:"absolute z-10 mt-2 w-56 bg-white rounded-md shadow-lg max-h-60 overflow-y-auto text-black"},Z={key:0,class:"p-2 border-t border-gray-200"},ee={class:"inline-flex items-center w-full cursor-pointer"},te=["value"],le=["innerHTML"],se={key:0,class:"absolute z-10 mt-2 w-48 bg-white rounded-md shadow-lg text-black"},ae={key:0,class:"flex gap-2 items-center text-black bg-white/50 p-2 rounded-lg"},re={class:"relative ml-auto"},ne={__name:"HeaderFilter",emits:["update:filters"],setup(x,{emit:b}){const a=g([]),n=g(!1),r=g("all"),c=g(!1),s=g(""),p=g(""),i=g(""),l=g(null),m=g(null);N(l,()=>{n.value=!1}),N(m,()=>{c.value=!1});const v=b,w=h(()=>L.filter(y=>y.value!==0)),$=h(()=>{if(a.value.length===0)return"SDGs";if(a.value.length>1)return`SDGs (${a.value.length})`;const y=L.find(t=>t.value===a.value[0]);return y?y.title.replace(/<br\s*\/?>/g," "):"SDGs"}),C=h(()=>{switch(r.value){case"day":return"最近一天";case"week":return"最近一周";case"custom":return"自訂範圍";default:return"發布時間"}});function k(y){r.value=y,c.value=!1,y!=="custom"&&(s.value="",p.value="")}return F([a,r,s,p,i],()=>{v("update:filters",{sdgs:a.value,time:r.value,startDate:s.value,endDate:p.value,keyword:i.value})},{deep:!0,immediate:!0}),(y,t)=>(u(),d("div",K,[e("div",Q,[e("div",{class:"relative",ref_key:"sdgDropdownRef",ref:l},[e("button",{onClick:t[0]||(t[0]=o=>n.value=!n.value),class:"p-1 px-4 rounded-full bg-gray-500 text-white min-w-[150px] text-left flex justify-between items-center gap-2"},[e("span",{innerHTML:$.value,class:"truncate"},null,8,W),t[12]||(t[12]=e("span",null,"▾",-1))]),n.value?(u(),d("div",X,[a.value.length>0?(u(),d("div",Z,[e("button",{onClick:t[1]||(t[1]=o=>a.value=[]),class:"text-sm text-blue-600 hover:underline w-full text-center"}," 清除選擇 ")])):T("",!0),(u(!0),d(S,null,P(w.value,o=>(u(),d("div",{key:o.value,class:"p-2 hover:bg-gray-100"},[e("label",ee,[_(e("input",{type:"checkbox",value:o.value,"onUpdate:modelValue":t[2]||(t[2]=A=>a.value=A),class:"h-5 w-5 text-green-600 rounded focus:ring-green-500 border-gray-300"},null,8,te),[[z,a.value]]),e("span",{class:"ml-3 text-gray-700",innerHTML:o.title},null,8,le)])]))),128))])):T("",!0)],512),e("div",{class:"relative",ref_key:"timeDropdownRef",ref:m},[e("button",{onClick:t[3]||(t[3]=o=>c.value=!c.value),class:"p-1 px-4 rounded-full bg-gray-500 text-white min-w-[150px] text-left flex justify-between items-center gap-2"},[e("span",null,f(C.value),1),t[13]||(t[13]=e("span",null,"▾",-1))]),c.value?(u(),d("div",se,[e("div",{onClick:t[4]||(t[4]=o=>k("all")),class:"cursor-pointer p-2 hover:bg-gray-100"}," 全部時間 "),e("div",{onClick:t[5]||(t[5]=o=>k("day")),class:"cursor-pointer p-2 hover:bg-gray-100"}," 最近一天 "),e("div",{onClick:t[6]||(t[6]=o=>k("week")),class:"cursor-pointer p-2 hover:bg-gray-100"}," 最近一周 "),e("div",{onClick:t[7]||(t[7]=o=>k("custom")),class:"cursor-pointer p-2 hover:bg-gray-100"}," 自訂範圍 ")])):T("",!0)],512),r.value==="custom"?(u(),d("div",ae,[_(e("input",{type:"date","onUpdate:modelValue":t[8]||(t[8]=o=>s.value=o),class:"p-1 border rounded-md"},null,512),[[V,s.value]]),t[14]||(t[14]=e("span",{class:"text-gray-600"},"至",-1)),_(e("input",{type:"date","onUpdate:modelValue":t[9]||(t[9]=o=>p.value=o),class:"p-1 border rounded-md"},null,512),[[V,p.value]])])):T("",!0)]),e("div",re,[_(e("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=o=>i.value=o),placeholder:"搜尋標題...",class:"p-1 px-4 rounded-full border border-black/50 placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-orange-400 focus:border-orange-400"},null,512),[[V,i.value]]),i.value.length?(u(),d("a",{key:0,href:"#",class:"absolute right-2 top-1.5",onClick:t[11]||(t[11]=M(o=>i.value="",["prevent"]))},[...t[15]||(t[15]=[e("i",{class:"fa-solid fa-xmark text-black/50"},null,-1)])])):T("",!0)])]))}},ie="/Changan/assets/draw_wall-Bo3Y0JoO.jpg",oe=["onClick"],de={class:"p-4 md:p-10 flex flex-col justify-center w-full md:flex-1 text-sm md:text-lg"},ue={class:"text-xl md:text-2xl mb-2 md:mb-2"},me={class:"grid grid-cols-1 md:grid-cols-2 gap-x-4"},ce={class:"mb-2"},pe={class:"text-md mb-2"},ve={class:"text-md mb-2 md:col-span-2"},ge={class:"flex items-center w-full md:w-70 gap-3 md:col-span-2"},fe={class:"relative flex-1 bg-gray-200 rounded-full h-2 overflow-hidden"},xe={class:"w-10 text-sm text-gray-700 text-left"},be={class:"flex flex-wrap gap-2 mt-2 md:col-span-2"},we={__name:"ActionCard",props:{filteredInfo:{type:Array,default:()=>[]}},setup(x){const b=H(),a=r=>r<40?"bg-red-500":r<70?"bg-yellow-400":"bg-green-500",n=r=>{b.push({name:"action-detail",params:{id:r}})};return(r,c)=>(u(),d("div",B(E(r.$attrs)),[(u(!0),d(S,null,P(x.filteredInfo,s=>(u(),d("div",{class:"bg-gradient-to-r from-gray-800/40 to-gray-400/20 backdrop-blur-sm animate-fade-in-up cursor-pointer w-full md:max-w-7xl md:max-h-95 rounded-xl hover:shadow-focus overflow-hidden flex flex-col md:flex-row hover:scale-105",key:s.id,onClick:p=>n(s.id)},[c[1]||(c[1]=e("div",{class:"w-full md:w-2/5 flex items-end justify-center md:justify-end"},[e("img",{src:ie,alt:"Card Image",class:"w-full h-full object-cover object-center rounded-xl"})],-1)),e("div",de,[e("h2",ue,"主題："+f(s.title),1),e("div",me,[e("p",ce," 時間 ："+f(s.startTime&&s.endTime?new Date(s.startTime*1e3).toLocaleDateString()+" ~ "+new Date(s.endTime*1e3).toLocaleDateString():"無"),1),e("p",pe,"成員："+f(s.group),1),e("p",ve,"描述 ："+f(s.intro),1),e("div",ge,[c[0]||(c[0]=U(" 進度： ",-1)),e("div",fe,[e("div",{class:O(["h-2 rounded-full transition-all duration-500",a(s.progress)]),style:R({width:s.progress+"%"})},null,6)]),e("span",xe,f(s.progress)+"% ",1)]),e("div",be,[(u(!0),d(S,null,P(s.types,p=>(u(),d("span",{key:p,class:"px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800"},f(I(L)[p].title),1))),128))])])])],8,oe))),128))],16))}},ye={key:0,class:"text-base md:text-[1.6rem]"},Te=["disabled"],he=["disabled"],ke={__name:"PageLabel",props:{totalItems:{type:Number,required:!0},itemsPerPage:{type:Number,default:6},modelValue:{type:Number,required:!0}},emits:["update:modelValue"],setup(x,{emit:b}){const a=x,n=b,r=h(()=>a.totalItems===0?1:Math.ceil(a.totalItems/a.itemsPerPage)),c=()=>{a.modelValue<r.value&&n("update:modelValue",a.modelValue+1)},s=()=>{a.modelValue>1&&n("update:modelValue",a.modelValue-1)};return(p,i)=>r.value>=1?(u(),d("div",ye,[e("button",{onClick:s,disabled:x.modelValue===1,class:"px-4 py-2 bg-gray-300 rounded-md disabled:opacity-50"}," 上一頁 ",8,Te),e("span",null,"第 "+f(x.modelValue)+" / "+f(r.value)+" 頁",1),e("button",{onClick:c,disabled:x.modelValue===r.value,class:"px-4 py-2 bg-gray-300 rounded-md disabled:opacity-50"}," 下一頁 ",8,he)])):T("",!0)}},_e={class:"relative z-5 pt-25 w-full shadow-md bg-header text-rice-500"},De={class:"container mx-auto flex items-center p-4"},$e={class:"w-1/3"},Ce={class:"p-10 flex flex-col justify-center items-center gap-8 max-w-7xl md:mx-auto"},Ve={key:0,class:"text-center text-gray-500 mt-8"},j=3,Se={__name:"Actions",setup(x){const b=J("handleAppScroll"),a=g(Y),n=g({sdgs:[],time:"all",startDate:"",endDate:"",keyword:""}),r=g(1),c=i=>{n.value=i,r.value=1},s=h(()=>{let i=a.value;if(n.value.sdgs.length>0&&(i=i.filter(l=>l.types&&l.types.some(m=>n.value.sdgs.includes(m)))),n.value.time!=="all"){const l=new Date;let m,v;switch(n.value.time){case"day":v=new Date(l),m=new Date(l),m.setDate(l.getDate()-1);break;case"week":v=new Date(l),m=new Date(l),m.setDate(l.getDate()-7);break;case"custom":n.value.startDate&&n.value.endDate&&(m=new Date(n.value.startDate),m.setHours(0,0,0,0),v=new Date(n.value.endDate),v.setHours(23,59,59,999));break}m&&v&&(i=i.filter(w=>{if(!w.startTime||!w.endTime||!String(w.startTime).trim()||!String(w.endTime).trim())return!1;const $=new Date(Number(w.startTime)*1e3),C=new Date(Number(w.endTime)*1e3);return $<=v&&C>=m}))}return n.value.keyword&&(i=i.filter(l=>l.title.toLowerCase().includes(n.value.keyword.toLowerCase()))),i}),p=h(()=>{const i=(r.value-1)*j,l=i+j;return s.value.slice(i,l)});return(i,l)=>{const m=G("router-link");return u(),d("div",{class:"page-background content-scroller",onScroll:l[1]||(l[1]=(...v)=>I(b)&&I(b)(...v))},[e("header",_e,[e("div",De,[e("div",$e,[D(m,{to:"/",class:"back-home-btn"},{default:q(()=>[...l[2]||(l[2]=[e("span",{class:"text"},"回首頁",-1),e("span",{class:"icon"},"←",-1)])]),_:1})]),l[3]||(l[3]=e("div",{class:"w-1/3 text-center"},[e("h1",{class:"text-2xl md:text-3xl font-bold"},"行動追蹤")],-1)),l[4]||(l[4]=e("div",{class:"w-1/3"},null,-1))])]),e("main",Ce,[D(ne,{"onUpdate:filters":c,class:"flex flex-wrap justify-center items-center gap-4"}),D(we,{filteredInfo:p.value,class:"flex flex-col gap-10 w-full md:px-0"},null,8,["filteredInfo"]),s.value.length===0?(u(),d("div",Ve,[...l[5]||(l[5]=[e("p",null,"找不到符合條件的行動。",-1)])])):T("",!0),D(ke,{class:"flex justify-center items-center gap-4 mt-8",totalItems:s.value.length,itemsPerPage:j,modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=v=>r.value=v)},null,8,["totalItems","modelValue"])])],32)}}};export{Se as default};
